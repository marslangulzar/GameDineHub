@model IEnumerable<BusinessEntities.Entities.Game.TeamSongVM>

@{
    if (Model != null && Model.Count() > 0)
    {
        var max = Model.Max(x => x.VoteCount);


        var sortedModel = Model.ToList();

        sortedModel.Sort((first, second) => { return second.VoteCount.CompareTo(first.VoteCount); });

        foreach (var item in sortedModel)
        {
            if (item.VotingDone != true)
            {
                if (item.VoteCount == max)
                {

                    <div id="winnerSection" class="alert alert-warning alert-dismissible fade show d-none" >
                        <div class="d-flex align-items-center">
                            <div class="alert-icon width-6">
                                <span class="icon-stack icon-stack-lg">
                                    <i class="base-2 icon-stack-3x color-warning-400"></i>
                                    <i class="fas fa-trophy color-white icon-stack-1x"></i>
                                </span>
                            </div>
                            <div class="flex-1 text-center" >
                                <span class="h1">@(item.VoteCount==0?"Voting Ended.": "Congratulations! "+ @item.TeamName  +" won the round with " + @item.VoteCount + " vote(s).")</span>
                                <br>
                            </div>
                        </div>
                    </div>
                }

                <input type="hidden" id="songUrl_@item.ID" value="@item.SongURL" />
                <div class="card mt-2 @( item.VoteCount==max && item.VoteCount >0?"bg-warning-400 border-custom" : "" )" id="votingItem_@item.ID">
                    <div class="card-body py-2">
                        <div class="row">
                            <div class="col-md-2 my-auto px-1">
                                <a href="javascript:void(0);" class="btn btn-warning btn-lg btn-icon rounded-circle waves-effect waves-themed fs-xxl fw-700">
                                    @item.VoteCount
                                </a>
                            </div>
                            <div class="col-md-5 my-auto px-1">
                                <h2 class="text-dark font-weight-bold mb-0"> @item.Name</h2>
                            </div>
                            <div class="col-md-2 my-auto px-1">
                            </div>
                            <div class="col-md-3 d-flex justify-content-end px-1">
                                <div class="my-auto">
                                    <span class="badge text-uppercase fw-700 py-2" style="font-size:1.5rem ; min-width: 170px;">@item.TeamName</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    }

}
